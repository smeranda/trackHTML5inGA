/*
 * trackHTML5inGA 
 * v0.1
 *
 * Track HTML Features in Google Analytics
 * http://go.unl.edu/trackHTML5inGA
 *
 * Copyright (c) 2010 Seth Meranda - http://seth.meranda.org/
 * Dual-licensed under the BSD and MIT licenses.
 *
 * * * ----------------------------------------------------
 * * * This script uses the Modernizr JavaScript library
 * * *
 * * * Copyright (c) 2009-2010 Faruk Ates - http://farukat.es/
 * * * Dual-licensed under the BSD and MIT licenses.
 * * * http://www.modernizr.com/license/
 * * *
 * * * This has been slightly modified for trackHTML5inGA: 
 * * *    removing the lines which add classes to <html>
 * * *----------------------------------------------------
 */
var loadingJS={};
trackHTML5inGA=function(){return{version:"0.1",index:5,loadedJS:{},featuresToTrack:featuresToTrack||false,initialize:function(){if(trackHTML5inGA.featuresToTrack){console.log("tested true for array");trackHTML5inGA.checkCookie()}else console.log("we don't have an array")},loadJS:function(a,b){if(!trackHTML5inGA.loadedJS[a])if(a in loadingJS)loadingJS[a].push(b);else{loadingJS[a]=[];var c=document.createElement("script");c.setAttribute("src",a);c.setAttribute("type","text/javascript");document.getElementsByTagName("head").item(0).appendChild(c);
loadingJS[a].push(b);var e=function(){trackHTML5inGA.loadedJS[a]=1;if(loadingJS[a]){for(var d=0;d<loadingJS[a].length;d++)loadingJS[a][d]();delete loadingJS[a]}};c.onreadystatechange=function(){if(c.readyState=="loaded"||c.readyState=="complete")e()};c.onload=e}},getCookie:function(a){a=a+"=";var b="";if(document.cookie.length>0){offset=document.cookie.indexOf(a);if(offset!=-1){offset+=a.length;end=document.cookie.indexOf(";",offset);if(end==-1)end=document.cookie.length;b=unescape(document.cookie.substring(offset,
end))}}return b},setCookie:function(){document.cookie="trackHTML5inGA=yes";console.log("we've set the cookie, now load modernizr and begin tests");trackHTML5inGA.loadJS("js/modernizr.min.js",function(){trackHTML5inGA.testBrowser()})},checkCookie:function(){if(trackHTML5inGA.getCookie("trackHTML5inGA")!="yes"){console.log("we dont't have a cookie, so let's set it");trackHTML5inGA.setCookie()}else console.log("we already have the cookie, do nothing")},testIfInArray:function(a){ourArray=trackHTML5inGA.featuresToTrack;
return ourArray.join("").indexOf(a)>=0?true:false},testBrowser:function(){console.log("let's start our tests");if(window.Modernizr){var a=[],b;for(b in Modernizr)if(trackHTML5inGA.testIfInArray(b))if(typeof Modernizr[b]!=="function")if(b=="inputtypes"||b=="input")for(var c in Modernizr[b])Modernizr[b][c]&&a.push(b+"-("+c+")");else Modernizr[b]&&b!="_version"&&b!="_enableHTML5"&&a.push(b);_gaq.push(["_setCustomVar",5,"HTML5",a.join(" "),1])}else console.log("Modernizr object not created.")}}}();
(function(){try{if(_gaq){console.log("we have GA, let's run our tests");console.log(featuresToTrack);trackHTML5inGA.initialize()}}catch(a){}})();